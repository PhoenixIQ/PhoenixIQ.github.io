"use strict";(self.webpackChunkphoenixiq_github_io=self.webpackChunkphoenixiq_github_io||[]).push([[64721],{68453:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>c,toc:()=>d});var r=i(85893),t=i(11151);const s={id:"phoenix-upgrade-2-2-1",title:"2.1.8\u5347\u7ea72.2.1\u6307\u5357"},a=void 0,c={id:"phoenix-2.x/upgrade/phoenix-upgrade-2-2-1",title:"2.1.8\u5347\u7ea72.2.1\u6307\u5357",description:"\u914d\u7f6e\u53d8\u66f4",source:"@site/versioned_docs/version-2.2.4/phoenix-2.x/06-upgrade/01-upgrade-2-2-0.md",sourceDirName:"phoenix-2.x/06-upgrade",slug:"/phoenix-2.x/upgrade/phoenix-upgrade-2-2-1",permalink:"/docs/2.2.4/phoenix-2.x/upgrade/phoenix-upgrade-2-2-1",draft:!1,unlisted:!1,editUrl:"https://github.com/PhoenixIQ/versioned_docs/version-2.2.4/phoenix-2.x/06-upgrade/01-upgrade-2-2-0.md",tags:[],version:"2.2.4",sidebarPosition:1,frontMatter:{id:"phoenix-upgrade-2-2-1",title:"2.1.8\u5347\u7ea72.2.1\u6307\u5357"},sidebar:"docs",previous:{title:"\u5747\u8861\u6027\u6d4b\u8bd5",permalink:"/docs/2.2.4/phoenix-2.x/phoenix-test/balance-test-2x"},next:{title:"2.2.1\u5347\u7ea72.2.2\u6307\u5357",permalink:"/docs/2.2.4/phoenix-2.x/upgrade/phoenix-upgrade-2-2-2"}},o={},d=[{value:"\u914d\u7f6e\u53d8\u66f4",id:"\u914d\u7f6e\u53d8\u66f4",level:2},{value:"\u79fb\u9664<code>routers</code>\u914d\u7f6e",id:"\u79fb\u9664routers\u914d\u7f6e",level:3},{value:"<code>server</code>\u8ba2\u9605\u914d\u7f6e\u53d8\u66f4",id:"server\u8ba2\u9605\u914d\u7f6e\u53d8\u66f4",level:3},{value:"event Publish \u914d\u7f6e\u53d8\u52a8",id:"event-publish-\u914d\u7f6e\u53d8\u52a8",level:3},{value:"\u4f7f\u7528<code>client</code>\u53d1\u9001\u6d88\u606f",id:"\u4f7f\u7528client\u53d1\u9001\u6d88\u606f",level:2},{value:"\u4e8b\u52a1\u4e2d<code>SagaAction</code>\u548c<code>TccAction API</code>\u53d8\u66f4",id:"\u4e8b\u52a1\u4e2dsagaaction\u548ctccaction-api\u53d8\u66f4",level:3},{value:"\u9879\u76ee\u63a5\u5165admin\u76d1\u63a7",id:"\u9879\u76ee\u63a5\u5165admin\u76d1\u63a7",level:2},{value:"docker-compose\u53d8\u66f4",id:"docker-compose\u53d8\u66f4",level:3},{value:"\u4f7f\u7528rancher\u64cd\u4f5c",id:"\u4f7f\u7528rancher\u64cd\u4f5c",level:4},{value:"\u68c0\u67e5\u670d\u52a1\u662f\u5426\u88ab\u76d1\u63a7",id:"\u68c0\u67e5\u670d\u52a1\u662f\u5426\u88ab\u76d1\u63a7",level:3},{value:"\u6d4b\u8bd5\u5de5\u5177\u7c7b<code>EntityAggregateFixture</code>\u5305\u8def\u5f84\u53d8\u66f4",id:"\u6d4b\u8bd5\u5de5\u5177\u7c7bentityaggregatefixture\u5305\u8def\u5f84\u53d8\u66f4",level:2}];function l(e){const n={code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"\u914d\u7f6e\u53d8\u66f4",children:"\u914d\u7f6e\u53d8\u66f4"}),"\n",(0,r.jsxs)(n.h3,{id:"\u79fb\u9664routers\u914d\u7f6e",children:["\u79fb\u9664",(0,r.jsx)(n.code,{children:"routers"}),"\u914d\u7f6e"]}),"\n",(0,r.jsx)(n.p,{children:"2.2.1\u652f\u6301\u81ea\u52a8\u626b\u9762\u670d\u52a1\u7684cmd\u4f5c\u4e3a\u8def\u7531\u4fe1\u606f\uff0c\u4e0d\u9700\u8981\u518d\u8fdb\u884c\u624b\u52a8\u914d\u7f6e"}),"\n",(0,r.jsx)(n.p,{children:"\u9700\u8981\u6ce8\u610f:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsxs)(n.em,{children:["\u4e00\u4e2a\u670d\u52a1\u670d\u52a1\u91cc\u9762",(0,r.jsx)(n.code,{children:"@CommandHandler"}),"+",(0,r.jsx)(n.code,{children:"@TransactionStart"}),"\u4e2d\u7684\u7684\u6d88\u606f\u540d\u5b57\u5fc5\u987b\u5728"]}),(0,r.jsx)(n.strong,{children:"\u670d\u52a1\u5185\u552f\u4e00"}),"\uff08\u6ce8\u610fSigma\u9879\u76ee\u4e2d\u5b58\u5728\u4e0d\u552f\u4e00\u7684\u60c5\u51b5\uff09"]}),"\n",(0,r.jsxs)(n.h3,{id:"server\u8ba2\u9605\u914d\u7f6e\u53d8\u66f4",children:[(0,r.jsx)(n.code,{children:"server"}),"\u8ba2\u9605\u914d\u7f6e\u53d8\u66f4"]}),"\n",(0,r.jsx)(n.p,{children:"2.2.1 \u914d\u7f6e\u793a\u4f8b\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"quantex:\n  phoenix:\n    server:\n      name: ${spring.application.name}\n      mq:\n        type: kafka\n        address: embedded\n        subscribe-topic: account-server\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u5728",(0,r.jsx)(n.strong,{children:"application"}),"\u4e2d\u5220\u9664\u8ba2\u9605\u591a\u4e2atopic\u7684\u914d\u7f6e\uff0c\u591atopic\u6e90\u7684\u914d\u7f6e\u652f\u6301",(0,r.jsx)(n.code,{children:"bean"}),"\u6ce8\u5165\u65b9\u5f0f\u8fdb\u884c\u8ba2\u9605\u3002\u901a\u8fc7\u5b9e\u73b0Subscribe\u63a5\u53e3\u8ba2\u9605\u7684\u6d88\u606f\u9ed8\u8ba4\u53d1\u9001\u5230\u672c\u96c6\u7fa4\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e",(0,r.jsx)(n.code,{children:"DeserializationReturn"}),"\u7684",(0,r.jsx)(n.code,{children:"src"}),"\u5c5e\u6027\u6765\u914d\u7f6e\u6d88\u606f\u5904\u7406\u5b8c\u6210\u540e\u56de\u590d\u7684topic"]}),"\n",(0,r.jsx)(n.p,{children:"\u6ce8\u610f\u70b9\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u9700\u8981\u5b9e\u73b0",(0,r.jsx)(n.code,{children:"com.iquantex.phoenix.server.mq.subscribe.Subscribe"})," \u63a5\u53e3"]}),"\n",(0,r.jsxs)(n.li,{children:["\u53cd\u5e8f\u5217\u5316\u7c7b\u652f\u6301\u4f7f\u7528",(0,r.jsx)(n.code,{children:"@Autowired"}),"\u8fdb\u884c\u6ce8\u5165"]}),"\n",(0,r.jsx)(n.li,{children:"\u589e\u52a0Consumer Offset\u7684\u914d\u7f6e"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"earliest"}),"\uff1a \u81ea\u52a8\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u6700\u65e9\u7684\u504f\u79fb\u91cf"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"latest"}),"\uff1a\u81ea\u52a8\u5c06\u504f\u79fb\u91cf\u91cd\u7f6e\u4e3a\u6700\u65b0\u7684\u504f\u79fb\u91cf"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"none"}),"\uff1a\u5982\u679c\u672a\u627e\u5230\u6d88\u8d39\u8005\u7ec4\u7684\u5148\u524d\u504f\u79fb\u91cf\uff0c\u5219\u5411\u6d88\u8d39\u8005\u629b\u51fa\u5f02\u5e38"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Slf4j\n@Component("WebEventTopicSubscribe")\npublic class WebEventTopicSubscribe implements Subscribe {\n\n    @Value("${other-subscribe.mqAddress}")\n    private String mqAddress;\n\n    @Value("${other-subscribe.topic}")\n    private String topic;\n\n    @Override\n    public SubscribeMqInfo getSubscribeMqInfo() {\n        return new SubscribeMqInfo(mqAddress, topic, AutoOffsetReset.earliest);\n    }\n\n    @Override\n    public List<DeserializationReturn> deserialize(String className, byte[] bytes) {\n        List<DeserializationReturn> deserializationReturns = new ArrayList<>();\n        // \u53cd\u5e8f\u5217\u5316\u903b\u8f91...\n        return deserializationReturns;\n    }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"event-publish-\u914d\u7f6e\u53d8\u52a8",children:"event Publish \u914d\u7f6e\u53d8\u52a8"}),"\n",(0,r.jsx)(n.p,{children:"2.2.1 \u914d\u7f6e\u53d8\u52a8\uff1a"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u79fb\u9664\u5bf9db\u914d\u7f6e\u7684\u4f9d\u8d56\uff0c\u9ed8\u8ba4\u4f7f\u7528",(0,r.jsx)(n.code,{children:"phoenix-server"}),"\u7684db\u914d\u7f6e"]}),"\n",(0,r.jsxs)(n.li,{children:["phoenix\u76ee\u524d\u53ea\u652f\u6301",(0,r.jsx)(n.code,{children:"kafka"}),"\uff0c\u6240\u4ee5\u8fd9\u91cc\u79fb\u9664",(0,r.jsx)(n.code,{children:"mq-type"}),"\u7684\u914d\u7f6e"]}),"\n",(0,r.jsxs)(n.li,{children:["\u79fb\u9664\u591a\u4e2atasks\u914d\u7f6e\uff0c\u9ed8\u8ba4\u503c\u63d0\u4f9b",(0,r.jsx)(n.code,{children:"event-task"}),"\u548c",(0,r.jsx)(n.code,{children:"monitor-task"})]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"quantex:\n  phoenix:\n    event-publish:\n      enabled: true\n      batch-size: 64\n      buffer-queue-size: 64\n      from-begin: true\n      event-task:\n        enabled: true\n        topic: bank-account-event-pub\n      monitor-task:\n        enabled: true\n        broker-server: 127.0.0.1:9092\n        topic: bank-account-monitor\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u63a5\u6536",(0,r.jsx)(n.code,{children:"eventPublish"}),"\u53d1\u9001\u7684\u6d88\u606f\u4ee3\u7801\u793a\u4f8b\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Slf4j\npublic class BankAccountEventListener implements BatchAcknowledgingMessageListener<String, byte[]> {\n\n    @Override\n    @SneakyThrows\n    @KafkaListener(topics = "${iquantex.phoenix.event-publish.event-task.topic:bank-account-event-pub}")\n    public void onMessage(List<ConsumerRecord<String, byte[]>> data, Acknowledgment acknowledgment) {\n        for (ConsumerRecord<String, byte[]> record : data) {\n            // \u53cd\u5e8f\u5217\u5316\n            Message eventMsg = new Message(record.value());\n            // \u4e1a\u52a1\u903b\u8f91...\n        }\n    }\n\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u5982\u679c\u60f3\u6a21\u62df\u521b\u5efa\u4e00\u4e2aphoenix\u6d88\u606f\u7528\u6765\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u6cd5\u8fdb\u884c\u6784\u5efa\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"Phoenix.Message build = Phoenix.Message.newBuilder().setPayloadClassName().setPayload().build();\nbuild.toByteArray();\n"})}),"\n",(0,r.jsxs)(n.h2,{id:"\u4f7f\u7528client\u53d1\u9001\u6d88\u606f",children:["\u4f7f\u7528",(0,r.jsx)(n.code,{children:"client"}),"\u53d1\u9001\u6d88\u606f"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'\u4fee\u6539\u524d\uff1a\nFuture<RpcResult> future = client.send(valPollingCheckCmd, requestId);\n\n\u4fee\u6539\u540e\uff0c\u589e\u52a0\u53d1\u9001\u76ee\u6807\u7684topic\u540d\u5b57\nFuture<RpcResult> future = client.send(valPollingCheckCmd, "targetTopic", requestId);\n'})}),"\n",(0,r.jsxs)(n.h3,{id:"\u4e8b\u52a1\u4e2dsagaaction\u548ctccaction-api\u53d8\u66f4",children:["\u4e8b\u52a1\u4e2d",(0,r.jsx)(n.code,{children:"SagaAction"}),"\u548c",(0,r.jsx)(n.code,{children:"TccAction API"}),"\u53d8\u66f4"]}),"\n",(0,r.jsxs)(n.p,{children:["\u5982\u679ccmd\u9700\u8981\u53d1\u9001\u5230\u5176\u4ed6\u670d\u52a1\uff0c\u5219\u9700\u8981\u8bbe\u7f6e",(0,r.jsx)(n.code,{children:"targetTopic"}),"\u4e3a\u76ee\u6807\u670d\u52a1",(0,r.jsx)(n.code,{children:"topic"}),"\u540d\u79f0\uff0c\u5982\u679c\u76ee\u6807\u670d\u52a1\u4e3a\u672c\u96c6\u7fa4\u5219\u4e0d\u9700\u8981\u6307\u5b9a\u3002",(0,r.jsx)(n.strong,{children:"SagaAction"}),"\u7684\u53d8\u66f4\u5982\u4e0b\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"@Getter\npublic class SagaAction extends TransactionAction {\n\n    private final Object tiCmd;\n\n    private final Object ciCmd;\n\n    private final String subTransId;\n\n    // Builder\u6ce8\u89e3\u52a0\u5230\u79c1\u6709\u6784\u9020\u51fd\u6570\u4e0a,\u53ef\u4ee5\u8bc6\u522b\u5230\u7236\u7c7b\u5b9a\u4e49\u7684\u5b57\u6bb5\n    @Builder\n    private SagaAction(String targetTopic, Object tiCmd, Object ciCmd, String subTransId) {\n        this.targetTopic = targetTopic;\n        this.tiCmd = tiCmd;\n        this.ciCmd = ciCmd;\n        this.subTransId = subTransId;\n    }\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.code,{children:"SagaAction"}),"\u548c",(0,r.jsx)(n.code,{children:"TccAction"}),"\u53ea\u80fd\u901a\u8fc7build\u7684\u65b9\u5f0f\u8fdb\u884c\u6784\u5efa\uff0c\u4e3e\u6817\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'SagaAction.builder().targetTopic("account-server").tiCmd(new AccountAllocateCmd(request.getOutAccountCode(), -request.getAmt())).build()\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u9879\u76ee\u63a5\u5165admin\u76d1\u63a7",children:"\u9879\u76ee\u63a5\u5165admin\u76d1\u63a7"}),"\n",(0,r.jsx)(n.h3,{id:"docker-compose\u53d8\u66f4",children:"docker-compose\u53d8\u66f4"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u5f15\u5165Prometheus\u914d\u7f6e\u955c\u50cf"}),"\n",(0,r.jsxs)(n.li,{children:["\u62f7\u8d1d\u955c\u50cf\u4e2d\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u5230",(0,r.jsx)(n.code,{children:"/prometheus-agent"}),"\u76ee\u5f55"]}),"\n",(0,r.jsx)(n.li,{children:"\u5728\u542f\u52a8\u670d\u52a1\u65f6\u9700\u8981\u6dfb\u52a0\u4ee5\u4e0b\u6307\u4ee4"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.code,{children:"-javaagent:/prometheus-agent/jmx_prometheus_javaagent.jar=8888:/prometheus-agent/config.yml"})}),"\n",(0,r.jsx)(n.p,{children:"\u63a5\u5165\u793a\u4f8b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:'#\u589e\u52a0Prometheus\u914d\u7f6e\u955c\u50cf,\u8d77\u4e00\u4e2a\u522b\u540d\u4e3aagent\nFROM harbor.iquantex.com/phoenix/prometheus-agent:1.0.0 as agent\nFROM harbor.iquantex.com/base_images/openjdk:8u212-jre-with-tool\n\nMAINTAINER "lan"\n\nVOLUME /tmp\n\n#\u62f7\u8d1d\u955c\u50cf\u4e2d\u7684\u914d\u7f6e\u6587\u4ef6\u5230\u6307\u5b9a\u76ee\u5f55\nCOPY --from=agent /prometheus-agent/ /prometheus-agent\nADD app.jar app.jar\n\n#\u589e\u52a0-javaagent:/prometheus-agent/jmx_prometheus_javaagent.jar=8888:/prometheus-agent/config.yml\nENTRYPOINT java -jar -javaagent:/prometheus-agent/jmx_prometheus_javaagent.jar=8888:/prometheus-agent/config.yml ${JAVA_OPTS} -XX:+UseConcMarkSweepGC -XX:+UseContainerSupport -XX:InitialRAMPercentage=75.0 -XX:MinRAMPercentage=75.0 -XX:MaxRAMPercentage=75.0  -XshowSettings:vm /app.jar\n'})}),"\n",(0,r.jsxs)(n.p,{children:["\u66b4\u9732",(0,r.jsx)(n.code,{children:"jmx"}),"\u91c7\u96c6\u6570\u636e\u7684\u7aef\u53e3\uff0chelm-chart\u6587\u4ef6\u5982\u4e0b\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Service\nmetadata:\n  annotations:\n    prometheus.io/path: /metrics\n    prometheus.io/port: "8888"\n    prometheus.io/scheme: http\n    prometheus.io/phoenix_scrape: "true"\n  name: phoenix-metric\nspec:\n  ports:\n  - name: default\n    port: 80\n    protocol: TCP\n    targetPort: 8888\n  selector:\n    apptype: phoenix\n  type: ClusterIP\nstatus:\n  loadBalancer: {}\n'})}),"\n",(0,r.jsx)(n.p,{children:"\u540c\u65f6\u8981\u5728\u670d\u52a1\u7684helm chart\u4e2d\u589e\u52a0\u4e00\u4e2a\u6807\u7b7e"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"spec:\n  template:\n    metadata:\n      labels:\n        apptype: phoenix\n"})}),"\n",(0,r.jsx)(n.h4,{id:"\u4f7f\u7528rancher\u64cd\u4f5c",children:"\u4f7f\u7528rancher\u64cd\u4f5c"}),"\n",(0,r.jsx)(n.p,{children:"rancher => \u670d\u52a1\u53d1\u73b0 => \u6dfb\u52a0DNS\u8bb0\u5f55"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image-20200814105314991",src:i(83896).Z+"",width:"1967",height:"750"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image-20200814105332438",src:i(67956).Z+"",width:"1991",height:"874"})}),"\n",(0,r.jsx)(n.p,{children:"\u88ab\u76d1\u63a7\u7684\u670d\u52a1\u589e\u52a0\u4ee5\u4e0b\u6807\u7b7e"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image-20200814105750492",src:i(45840).Z+"",width:"898",height:"644"})}),"\n",(0,r.jsx)(n.h3,{id:"\u68c0\u67e5\u670d\u52a1\u662f\u5426\u88ab\u76d1\u63a7",children:"\u68c0\u67e5\u670d\u52a1\u662f\u5426\u88ab\u76d1\u63a7"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u901a\u8fc7\u8bbf\u95ee\u672c\u5730\u7aef\u53e3\u6765\u67e5\u770b\u662f\u5426\u66b4\u9732\u76d1\u63a7\u6570\u636e"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["\u8fdb\u5165\u5bb9\u5668\u8bbf\u95ee8888\u7aef\u53e3\uff0c\u67e5\u770b\u662f\u5426\u6709\u66b4\u9732",(0,r.jsx)(n.code,{children:"com_iquantex_Phoenix"}),"\u6253\u5934\u7684\u76d1\u63a7\u4fe1\u606f"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'bash-5.0# curl localhost:8888\n...\n# HELP com_iquantex_Phoenix_ReceiverActor_NoHandlerMessageTotal Attribute exposed for management (com.iquantex.Phoenix<type=ReceiverActor,  aggregateRootId=kafka-9092-account-web-event-0><>NoHandlerMessageTotal)\n# TYPE com_iquantex_Phoenix_ReceiverActor_NoHandlerMessageTotal untyped\ncom_iquantex_Phoenix_ReceiverActor_NoHandlerMessageTotal{_aggregateRootId="kafka-9092-account-web-event-0",} 0.0\ncom_iquantex_Phoenix_ReceiverActor_NoHandlerMessageTotal{_aggregateRootId="kafka-9092-account-server-2",} 0.0\ncom_iquantex_Phoenix_ReceiverActor_NoHandlerMessageTotal{_aggregateRootId="kafka-9092-account-web-event-2",} 0.0\ncom_iquantex_Phoenix_ReceiverActor_NoHandlerMessageTotal{_aggregateRootId="kafka-9092-account-server-0",} 0.0\n...\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u901a\u8fc7Prometheus\u67e5\u770b\u76d1\u63a7\u4fe1\u606f"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u901a\u8fc7Prometheus\u670d\u52a1\u7684targets\u9875\u9762\u67e5\u770b\u662f\u5426\u6709\u88ab\u76d1\u63a7\u7684\u670d\u52a1"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"image-20200814104432533",src:i(45687).Z+"",width:"1654",height:"922"})}),"\n",(0,r.jsxs)(n.h2,{id:"\u6d4b\u8bd5\u5de5\u5177\u7c7bentityaggregatefixture\u5305\u8def\u5f84\u53d8\u66f4",children:["\u6d4b\u8bd5\u5de5\u5177\u7c7b",(0,r.jsx)(n.code,{children:"EntityAggregateFixture"}),"\u5305\u8def\u5f84\u53d8\u66f4"]}),"\n",(0,r.jsxs)(n.p,{children:["\u53d8\u66f4\u540e\u8def\u5f84\u4e3a\uff1a",(0,r.jsx)(n.code,{children:"com.iquantex.phoenix.server.test.EntityAggregateFixture"})]})]})}function h(e={}){const{wrapper:n}={...(0,t.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},83896:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/1-64aa34d06458c66a03b5837068ab2c9a.png"},67956:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/2-685ef044ed5a46049bada2469c31b5b5.png"},45840:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/3-2daa864783ece5e0778d282df93372bf.png"},45687:(e,n,i)=>{i.d(n,{Z:()=>r});const r=i.p+"assets/images/4-704eaccaa46c5707486474ad45644301.png"},11151:(e,n,i)=>{i.d(n,{Z:()=>c,a:()=>a});var r=i(67294);const t={},s=r.createContext(t);function a(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);