"use strict";(self.webpackChunkphoenixiq_github_io=self.webpackChunkphoenixiq_github_io||[]).push([[30296],{40236:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var i=t(85893),r=t(11151);t(74866),t(85162);const a={id:"extension",title:"Phoenix \u6269\u5c55",description:"\u7528\u4e8e\u6269\u5c55 Phoenix Framework \u7684\u80fd\u529b"},s=void 0,l={id:"phoenix-advanced/extension",title:"Phoenix \u6269\u5c55",description:"\u7528\u4e8e\u6269\u5c55 Phoenix Framework \u7684\u80fd\u529b",source:"@site/docs/09-phoenix-advanced/08-extension.md",sourceDirName:"09-phoenix-advanced",slug:"/phoenix-advanced/extension",permalink:"/docs/phoenix-advanced/extension",draft:!1,unlisted:!1,editUrl:"https://github.com/PhoenixIQ/docs/09-phoenix-advanced/08-extension.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{id:"extension",title:"Phoenix \u6269\u5c55",description:"\u7528\u4e8e\u6269\u5c55 Phoenix Framework \u7684\u80fd\u529b"},sidebar:"docs",previous:{title:"\u6ce8\u89e3\u89e3\u6790\u5668",permalink:"/docs/phoenix-advanced/annotation-resolver"},next:{title:"\u914d\u7f6e\u8be6\u60c5",permalink:"/docs/phoenix-core/phoenix-core-config"}},o={},d=[{value:"\u7b80\u4ecb",id:"introduce",level:2},{value:"\u5e94\u7528\u573a\u666f",id:"use-case",level:2},{value:"\u63a5\u53e3\u5b9a\u4e49",id:"api",level:2},{value:"\u4f7f\u7528\u8bf4\u660e",id:"guide",level:2},{value:"1. \u5b9a\u4e49\u6269\u5c55\u548c ID",id:"define-extension",level:3},{value:"2. \u5b9a\u4e49\u6269\u5c55\u5de5\u5382",id:"define-provider",level:3},{value:"3. \u5b9a\u4e49\u6269\u5c55\u9002\u914d\u5668",id:"define-adapter",level:3},{value:"4. \u83b7\u53d6\u6269\u5c55",id:"use-extension",level:3},{value:"\u4e8b\u4ef6\u5904\u7406\u5668\u6269\u5c55",id:"event-handler-extension",level:2},{value:"\u63a5\u53e3\u5b9a\u4e49",id:"event-handler-extension-api",level:3},{value:"\u4f7f\u7528\u8bf4\u660e",id:"event-handler-extension-usage",level:3},{value:"\u6dd8\u6c70\u7b56\u7565\u6269\u5c55",id:"expired-extension",level:2},{value:"\u63a5\u53e3\u5b9a\u4e49",id:"expired-extension-api",level:3},{value:"\u4f7f\u7528\u8bf4\u660e",id:"expired-extension-usage",level:3}];function c(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"introduce",children:"\u7b80\u4ecb"}),"\n",(0,i.jsx)(n.p,{children:'Phoenix \u63d0\u4f9b\u4e86\u4e00\u79cd"\u6269\u5c55"\u7684\u7279\u6027\uff0c\u8be5\u529f\u80fd\u4e00\u822c\u4f5c\u4e3a Phoenix \u548c Spring \u7684\u6865\u6881\uff0c\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u7c7b\u4f3c\u4e8e Spring Runner \u7684\u65b9\u5f0f\u800c\u5b58\u5728.'}),"\n",(0,i.jsx)(n.h2,{id:"use-case",children:"\u5e94\u7528\u573a\u666f"}),"\n",(0,i.jsx)(n.p,{children:"Phoenix \u6269\u5c55\u7684\u7528\u6237\u573a\u666f\u4e3b\u8981\u662f\u5728 Phoenix \u548c Spring \u73af\u5883\u4e0b\uff0c\u6784\u5efa\u4e00\u4e2a\u552f\u4e00\u7684\u5355\u4f8b\u5bf9\u8c61\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u5176\u4e2d\u6269\u5c55\u652f\u6301 SPI\u3001Spring \u4e24\u79cd\u52a0\u8f7d\u6a21\u5f0f\uff0c\u6269\u5c55\u9002\u914d\u5668\u652f\u6301 Spring \u8bfb\u53d6\u3002"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u573a\u666f\u4e00\uff1aSPI \u7684\u6269\u5c55\u52a0\u8f7d\uff0c\u4f7f\u7528\u9002\u914d\u5668\u589e\u52a0 Spring \u80fd\u529b\uff08\u6b64\u6a21\u5f0f\u5728 Phoenix \u5185\u90e8\u4e2d\u4f7f\u7528\uff09"}),"\n",(0,i.jsx)(n.li,{children:"\u573a\u666f\u4e8c\uff1aSpring \u7684\u6269\u5c55\u52a0\u8f7d\uff0c\u6b64\u65f6\u65e0\u987b\u4f7f\u7528\u9002\u914d\u5668\uff08\u6b64\u6a21\u5f0f\u5927\u90e8\u5206\u573a\u666f\u4e0b\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 Spring \u800c\u65e0\u9700 Phoenix \u6269\u5c55"}),"\n",(0,i.jsx)(n.li,{children:"\u573a\u666f\u4e09\uff1a\u63d0\u4f9b\u4e00\u4e2a Phoenix \u751f\u547d\u5468\u671f\u542f\u52a8\u94a9\u5b50\uff08\u8be5\u94a9\u5b50\u80fd\u4fdd\u8bc1\u4e00\u5b9a\u5728\u805a\u5408\u6839\u626b\u63cf\u4e4b\u540e\u6267\u884c\uff0c\u5f53\u5728\u96c6\u7fa4\u542f\u52a8\u4e4b\u524d\uff09"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"api",children:"\u63a5\u53e3\u5b9a\u4e49"}),"\n",(0,i.jsx)(n.p,{children:"Phoenix \u6269\u5c55\u4e3b\u8981\u7531\u4e09\u4e2a\u63a5\u53e3\uff0c\u4e00\u4e2a\u62bd\u8c61\u7c7b\u5b9a\u4e49\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Extension"})," \u63a5\u53e3\uff1a\u58f0\u660e\u4e00\u4e2a\u6269\u5c55"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ExtensionId<T extends Extension>"})," \u63a5\u53e3\uff0c\u58f0\u660e\u4e00\u4e2a\u6269\u5c55\u7684 UUID\uff0c\u4e5f\u53ef\u4ee5\u7528\u4e8e\u83b7\u53d6\u4e00\u4e2a\u6269\u5c55"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ExtensionProvider<T extends Extension>"})," \u62bd\u8c61\u7c7b\uff0c\u6269\u5c55\u7684\u5de5\u5382\u65b9\u6cd5\uff0c\u540c\u6837\u4e5f\u9700\u8981\u63d0\u4f9b ",(0,i.jsx)(n.code,{children:"ExtensionId"}),"\uff0c\u652f\u6301 SPI\u3001Spring \u4e24\u79cd\u52a0\u8f7d\u65b9\u5f0f"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ExtensionAdapter<T extends Extension>"})," \u63a5\u53e3\uff0c\u6269\u5c55\u7684\u9002\u914d\u5668\uff0c\u53ef\u7528\u4e8e\u52a0\u8f7d Spring \u73af\u5883"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// \u6269\u5c55\u63a5\u53e3\npublic interface Extension {\n\n}\n/** Phoenix \u6269\u5c55 ID \u7684\u5b9a\u4e49, \u7528\u4e8e\u8868\u793a\u7cfb\u7edf\u5185\u7684 UUID */\npublic interface ExtensionId<T extends Extension> {\n\n    /**\n     * \u6269\u5c55\u7684\u552f\u4e00 ID\n     *\n     * @return\n     */\n    ExtensionId<T> id();\n}\n\n/** Phoenix \u6269\u5c55\u5de5\u5382\u7684\u5b9a\u4e49 */\npublic abstract class ExtensionProvider<T extends Extension> implements ExtensionId<T> {\n\n    /**\n     * \u521b\u5efa\u6269\u5c55\u5b9e\u4f8b, \u53ef\u4ee5\u5305\u542b\u521d\u59cb\u5316\n     *\n     * @return\n     */\n    public abstract T create(PhoenixContext context);\n\n    /**\n     * \u901a\u8fc7 PhoenixContext \u83b7\u53d6\u6269\u5c55, \u65e0\u987b\u7528\u6237\u5b9e\u73b0.\n     *\n     * @param context\n     * @return\n     */\n    public T get(PhoenixContext context) {\n        return context.registerExtension(this);\n    }\n}\n\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u9664\u6b64\u4e4b\u5916\u8fd8\u6709\u4e00\u4e2a\u9002\u914d\u5668\u63a5\u53e3\uff0c\u7528\u4e8e\u5728\u7279\u6b8a\u7528\u4f8b\u5728\u96c6\u6210 Spring \u73af\u5883:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"\npublic interface ExtensionAdapter<T extends Extension> {\n\n    /**\n     * \u9002\u914d\u5668\n     *\n     * @param extension\n     * @return\n     */\n    T adapt(T extension);\n\n    /**\n     * \u5339\u914d\n     *\n     * @param id\n     * @return\n     */\n    boolean match(ExtensionId<T> id);\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"guide",children:"\u4f7f\u7528\u8bf4\u660e"}),"\n",(0,i.jsx)(n.p,{children:"\u4ee5 Phoenix \u7684\u4e8b\u4ef6\u5904\u7406\u5668\u6269\u5c55\u4e3a\u4f8b\uff1a"}),"\n",(0,i.jsx)(n.h3,{id:"define-extension",children:"1. \u5b9a\u4e49\u6269\u5c55\u548c ID"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// \u5b9a\u4e49\u4e8b\u4ef6\u5904\u7406\u5668\u6269\u5c55\npublic class EventHandlerExtension implements Extension {\n\n    private final Set<EventMessageHandler> handlers;\n\n    public EventHandlerExtension(Set<EventMessageHandler> handlers) {\n        this.handlers = handlers;\n    }\n    \n    // \u63d0\u4f9b\u6ce8\u5165\u65b0\u7684\u5904\u7406\u5668\u65b9\u6cd5\n    public void addHandler(Set<EventMessageHandler> handlers) {\n        this.handlers.addAll(handlers);\n    }\n\n    // \u4e8b\u4ef6\u56de\u8c03\u63a5\u53e3\n    public void handle(List<Phoenix.Message> messageList) {\n        for (EventMessageHandler handler : handlers) {\n            handler.handle(messageList);\n        }\n    }\n   \n    // \u6269\u5c55\u7684 UUID \u5b9a\u4e49\n    public enum EventHandlerExtensionId implements ExtensionId<EventHandlerExtension> {\n        INSTANCE;\n\n        @Override\n        public ExtensionId<EventHandlerExtension> id() {\n            return INSTANCE;\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"define-provider",children:"2. \u5b9a\u4e49\u6269\u5c55\u5de5\u5382"}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u91cc\u4f7f\u7528 SPI\uff0c\u4f46\u7528\u6237\u4e5f\u53ef\u4ee5\u4f7f\u7528 Spring \u6a21\u5f0f\uff0c\u5219\u65e0\u9700\u9002\u914d\u5668\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528 SPI \u7684\u4e00\u4e2a\u597d\u5904\u65f6\uff0c\u5728\u4e00\u4e9b\u6ca1\u6709 Spring \u7684\u73af\u5883\u4e2d\uff0c\u4ecd\u7136\u62e5\u6709\u4e00\u4e2a\u9ed8\u8ba4\u5b9e\u73b0\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// \u6269\u5c55\u5de5\u5382\u5b9a\u4e49\n@AutoService(ExtensionProvider.class) // \u4f7f\u7528\u8c37\u6b4c AutoService \u751f\u6210 SPI \u4fe1\u606f\npublic class EventHandlerExtensionProvider extends ExtensionProvider<EventHandlerExtension> {\n\n    // \u7528\u4e8e\u83b7\u53d6 ID\uff0c\u4e5f\u53ef\u4ee5\u7701\u7565\n    public static EventHandlerExtensionProvider INSTANCE = new EventHandlerExtensionProvider();\n\n    @Override\n    public EventHandlerExtension create(PhoenixContext context) {\n        return new EventHandlerExtension(new HashSet<>());\n    }\n\n    @Override\n    public ExtensionId<EventHandlerExtension> id() {\n        return EventHandlerExtensionId.INSTANCE;\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"define-adapter",children:"3. \u5b9a\u4e49\u6269\u5c55\u9002\u914d\u5668"}),"\n",(0,i.jsx)(n.p,{children:"\u9002\u914d\u5668\u7528\u4e8e\u4e30\u5bcc\u6269\u5c55\u7684\u80fd\u529b\uff0c\u8fd9\u4e2a\u4e30\u5bcc\u53ef\u4ee5\u662f Spring \u4e5f\u53ef\u4ee5\u662f\u5176\u4ed6\uff0c\u5728\u672c\u5b9a\u4e49\u4e2d\uff0c\u4f7f\u7528\u4e86 Spring \u7684 IOC \u80fd\u529b\uff0c\u5f80\u6269\u5c55\u4e86\u6ce8\u5165\u4e86\n\u5728 Spring \u4e2d\u5b9a\u4e49\u7684 EventMessageHandler Bean\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@Component\npublic class EventHandlerExtensionAdapter implements ExtensionAdapter<EventHandlerExtension> {\n\n    private final ApplicationContext springCtx;\n\n    public EventHandlerExtensionAdapter(ApplicationContext context) {\n        this.springCtx = context;\n    }\n\n    @Override\n    public EventHandlerExtension adapt(EventHandlerExtension extension) {\n        Collection<EventMessageHandler> messageHandlers =\n                springCtx.getBeansOfType(EventMessageHandler.class).values();\n        Set<EventMessageHandler> handlerSet = messageHandlers.stream().collect(Collectors.toSet());\n        extension.addHandler(handlerSet);\n        return extension;\n    }\n\n    @Override\n    public boolean match(ExtensionId<EventHandlerExtension> id) {\n        return EventHandlerExtensionId.INSTANCE.equals(id);\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"use-extension",children:"4. \u83b7\u53d6\u6269\u5c55"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// \u83b7\u53d6\u5e76\u6ce8\u518c\u5230 PhoenixContext\nEventHandlerExtension extension = EventHandlerExtensionProvider.INSTANCE.get(PhoenixContext.getInstance());\n// \u4ec5\u83b7\u53d6\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5219\u629b\u51fa\u5f02\u5e38\nEventHandlerExtension extension = PhoenixContext.getInstance().getExtension(EventHandlerExtensionId.INSTANCE);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"event-handler-extension",children:"\u4e8b\u4ef6\u5904\u7406\u5668\u6269\u5c55"}),"\n",(0,i.jsx)(n.p,{children:"Phoenix \u57fa\u4e8e\u6269\u5c55\u80fd\u529b\uff0c\u4e30\u5bcc\u4e86 Phoenix \u7684\u4e00\u4e9b\u529f\u80fd\uff0c\u4e8b\u4ef6\u5904\u7406\u5668\u6269\u5c55\u5c31\u662f\u5176\u4e2d\u4e00\u4e2a\uff0c\u8be5\u6269\u5c55\u63d0\u4f9b\u4e86 EventStore \u5728\u6301\u4e45\u5316\u65f6\u7684\u56de\u8c03\u80fd\u529b."}),"\n",(0,i.jsx)(n.h3,{id:"event-handler-extension-api",children:"\u63a5\u53e3\u5b9a\u4e49"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public interface EventMessageHandler {\n\n    /**\n     * \u6279\u91cf\u5904\u7406\n     */\n    void handle(List<Message> messageList);\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"event-handler-extension-usage",children:"\u4f7f\u7528\u8bf4\u660e"}),"\n",(0,i.jsxs)(n.p,{children:["\u4e8b\u4ef6\u5904\u7406\u5668\u7684\u5b9a\u4e49\u53ea\u9700\u8981\u5b9e\u73b0 ",(0,i.jsx)(n.code,{children:"EventMessageHandler"})," \u5e76\u6ce8\u518c\u4e3a Spring Bean \u5373\u53ef, \u7531\u6269\u5c55\u548c\u9002\u914d\u5668\u63d0\u4f9b\u6ce8\u5165\u80fd\u529b\u3002"]}),"\n",(0,i.jsxs)(n.admonition,{title:"\u6ce8\u610f\u4e8b\u9879",type:"warning",children:[(0,i.jsx)(n.p,{children:"\u4e8b\u4ef6\u5904\u7406\u63a5\u53e3\u76ee\u524d\u4e0e\u6301\u4e45\u5316\u8fc7\u7a0b\u5305\u88c5\u4e3a\u4e00\u4e2a\u4e8b\u52a1\uff0c\u56e0\u6b64\u5f53\u5904\u7406\u5668\u56de\u8c03\u6267\u884c\u5931\u8d25\u65f6\uff0c\u4e5f\u4f1a\u5bfc\u81f4\u6301\u4e45\u5316\u4e8b\u4ef6\u5931\u8d25\uff0c\u6700\u7ec8\u5bfc\u81f4\u805a\u5408\u6839\u91cd\u505a\uff08\u6eaf\u6e90 + \u91cd\u65b0\u6267\u884c\uff09\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\n\u51fa\u73b0\u4e8b\u4ef6\u4e71\u5e8f\u7b49\u95ee\u9898\u3002"}),(0,i.jsx)(n.p,{children:"\u9664\u6b64\u4e4b\u5916\uff0c\u4e8b\u4ef6\u5904\u7406\u5668\u7684\u6027\u80fd\u4e5f\u662f\u4e00\u4e2a\u9700\u8981\u91cd\u70b9\u8003\u8651\u7684\u70b9\uff0c\u56e0\u4e3a\u5904\u7406\u5668\u548c\u6301\u4e45\u5316\u8fdb\u7a0b\u662f\u4e32\u884c\u5316\u6267\u884c\u7684\uff0c\u56e0\u6b64\u5904\u7406\u5668\u9700\u8981\u5c3d\u53ef\u80fd\u5c11\u800c\u4e14\u7f16\u5199\u5f97\u9ad8\u6548\u3002"})]}),"\n",(0,i.jsx)(n.h2,{id:"expired-extension",children:"\u6dd8\u6c70\u7b56\u7565\u6269\u5c55"}),"\n",(0,i.jsx)(n.p,{children:"Phoenix \u57fa\u4e8e\u6269\u5c55\u80fd\u529b\uff0c\u4e30\u5bcc\u4e86 Phoenix \u7684\u4e00\u4e9b\u529f\u80fd\uff0c\u805a\u5408\u6839\u6dd8\u6c70\u7b56\u7565\u6269\u5c55\u5c31\u662f\u5176\u4e2d\u4e00\u4e2a\uff0c\u8be5\u6269\u5c55\u63d0\u4f9b\u4e86\u4f7f\u7528 Spring Bean \u6765\u81ea\u5b9a\u4e49\u805a\u5408\u6839\u6269\u5c55\u7684\u80fd\u529b\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"expired-extension-api",children:"\u63a5\u53e3\u5b9a\u4e49"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"public interface ExpiredStrategy {\n\n    /**\n     * \u4f5c\u7528\u7684\u805a\u5408\u6839\u7c7b\u578b\n     */\n    String forType();\n\n    /**\n     * \u5224\u65ad\u805a\u5408\u6839\u662f\u5426\u8fc7\u671f.\n     */\n    boolean isExpired(String aggregareRootType, String aggregareRootId, long lastHandleTime);\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"expired-extension-usage",children:"\u4f7f\u7528\u8bf4\u660e"}),"\n",(0,i.jsxs)(n.p,{children:["\u4e8b\u4ef6\u5904\u7406\u5668\u7684\u5b9a\u4e49\u53ea\u9700\u8981\u5b9e\u73b0 ",(0,i.jsx)(n.code,{children:"ExpiredStrategy"})," \u5e76\u6ce8\u518c\u4e3a Spring Bean \u5373\u53ef\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u805a\u5408\u6839\u662f\u5426\u8fc7\u671f\u7684\u5224\u65ad\uff0cPhoenix \u63d0\u4f9b\u4e86\u4e09\u4e2a\u53c2\u6570\u4f9b\u7528\u6237\u5224\u65ad\uff1a"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"aggregareRootType"}),": \u805a\u5408\u6839\u7c7b\u578b\uff0c\u4e00\u822c\u540c forType \u4e00\u6837"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"aggregareRootId"}),": \u805a\u5408\u6839 ID\uff0c\u4f7f\u7528\u7684\u662f ",(0,i.jsx)(n.code,{children:"EA@aggregareRootType@\u5b9e\u9645 ID"})," \u7684\u683c\u5f0f"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"lastHandleTime"}),": \u4e0a\u4e00\u6b21\u805a\u5408\u6839\u63a5\u6536\u547d\u4ee4\u7684\u672c\u5730\u673a\u5668\u65f6\u95f4\uff08",(0,i.jsx)(n.code,{children:"System.currentTimeMillis()"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u7531\u4e8e ExpiredStrategy \u652f\u6301 Spring \u73af\u5883\uff0c\u56e0\u6b64\u7528\u6237\u53ef\u4ee5\u5728\u8fc7\u671f\u7b56\u7565\u4e2d\uff0c\u4f7f\u7528\u5916\u90e8\u5b58\u50a8\u6765\u5224\u65ad\u662f\u5426\u8fc7\u671f\u3002\u4f8b\u5982\uff1a\u4f7f\u7528 Redis \u5b58\u50a8\u6709\u6548\u805a\u5408\u6839\u96c6\u5408\uff0c\u5f53\u5230\u8fbe\u67d0\u4e2a\u6307\u5b9a\u65f6\u95f4\u65f6\uff0c\n\u5c06\u8fd9\u4e9b\u805a\u5408\u6839\u6dd8\u6c70\uff08\u6dfb\u52a0\u6b65\u9aa4\u53ef\u4ee5\u7531\u53e6\u4e00\u4e2a\u521d\u59cb\u5316\u7b56\u7565\u5b9e\u73b0\uff0c\u53ef\u4ee5\u5206\u79bb\uff09"})]})}function u(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},85162:(e,n,t)=>{t.d(n,{Z:()=>s});t(67294);var i=t(86010);const r={tabItem:"tabItem_Ymn6"};var a=t(85893);function s(e){let{children:n,hidden:t,className:s}=e;return(0,a.jsx)("div",{role:"tabpanel",className:(0,i.Z)(r.tabItem,s),hidden:t,children:n})}},74866:(e,n,t)=>{t.d(n,{Z:()=>S});var i=t(67294),r=t(86010),a=t(12466),s=t(16550),l=t(20469),o=t(91980),d=t(67392),c=t(50012);function u(e){return i.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function x(e){const{values:n,children:t}=e;return(0,i.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:i,default:r}}=e;return{value:n,label:t,attributes:i,default:r}}))}(t);return function(e){const n=(0,d.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function h(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function p(e){let{queryString:n=!1,groupId:t}=e;const r=(0,s.k6)(),a=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,o._X)(a),(0,i.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(r.location.search);n.set(a,e),r.replace({...r.location,search:n.toString()})}),[a,r])]}function v(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,a=x(e),[s,o]=(0,i.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const i=t.find((e=>e.default))??t[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:n,tabValues:a}))),[d,u]=p({queryString:t,groupId:r}),[v,g]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,a]=(0,c.Nk)(t);return[r,(0,i.useCallback)((e=>{t&&a.set(e)}),[t,a])]}({groupId:r}),E=(()=>{const e=d??v;return h({value:e,tabValues:a})?e:null})();(0,l.Z)((()=>{E&&o(E)}),[E]);return{selectedValue:s,selectValue:(0,i.useCallback)((e=>{if(!h({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),g(e)}),[u,g,a]),tabValues:a}}var g=t(72389);const E={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var m=t(85893);function b(e){let{className:n,block:t,selectedValue:i,selectValue:s,tabValues:l}=e;const o=[],{blockElementScrollPositionUntilNextRender:d}=(0,a.o5)(),c=e=>{const n=e.currentTarget,t=o.indexOf(n),r=l[t].value;r!==i&&(d(n),s(r))},u=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,m.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":t},n),children:l.map((e=>{let{value:n,label:t,attributes:a}=e;return(0,m.jsx)("li",{role:"tab",tabIndex:i===n?0:-1,"aria-selected":i===n,ref:e=>o.push(e),onKeyDown:u,onClick:c,...a,className:(0,r.Z)("tabs__item",E.tabItem,a?.className,{"tabs__item--active":i===n}),children:t??n},n)}))})}function j(e){let{lazy:n,children:t,selectedValue:r}=e;const a=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=a.find((e=>e.props.value===r));return e?(0,i.cloneElement)(e,{className:"margin-top--md"}):null}return(0,m.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function f(e){const n=v(e);return(0,m.jsxs)("div",{className:(0,r.Z)("tabs-container",E.tabList),children:[(0,m.jsx)(b,{...e,...n}),(0,m.jsx)(j,{...e,...n})]})}function S(e){const n=(0,g.Z)();return(0,m.jsx)(f,{...e,children:u(e.children)},String(n))}},11151:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>s});var i=t(67294);const r={},a=i.createContext(r);function s(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);