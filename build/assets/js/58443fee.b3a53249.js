"use strict";(self.webpackChunkphoenix_website_next=self.webpackChunkphoenix_website_next||[]).push([[72733],{62690:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>t,metadata:()=>c,toc:()=>a});var o=s(85893),r=s(11151);const t={id:"cluster",title:"6. \u96c6\u7fa4\u793a\u4f8b"},i="\u96c6\u7fa4\u793a\u4f8b",c={id:"phoenix-2.x/phoenix/quick-start-example/cluster",title:"6. \u96c6\u7fa4\u793a\u4f8b",description:"\u672c\u7ae0\u4ecb\u7ecd\u672c\u5730\u642d\u5efa\u914d\u7f6e\u96c6\u7fa4\u6a21\u5f0f\u7684 Phoenix \u96c6\u7fa4\uff0c\u5982\u679c\u60a8\u60f3\u4e86\u89e3\u66f4\u591a\u96c6\u7fa4\u6a21\u5f0f\u8bf7\u53c2\u8003\uff1a\u96c6\u7fa4\u914d\u7f6e\u3002",source:"@site/versioned_docs/version-2.5.5/phoenix-2.x/01-phoenix/05-quick-start-example/06-cluster.md",sourceDirName:"phoenix-2.x/01-phoenix/05-quick-start-example",slug:"/phoenix-2.x/phoenix/quick-start-example/cluster",permalink:"/docs/2.5.5/phoenix-2.x/phoenix/quick-start-example/cluster",draft:!1,unlisted:!1,editUrl:"https://github.com/PhoenixIQ/versioned_docs/version-2.5.5/phoenix-2.x/01-phoenix/05-quick-start-example/06-cluster.md",tags:[],version:"2.5.5",sidebarPosition:6,frontMatter:{id:"cluster",title:"6. \u96c6\u7fa4\u793a\u4f8b"},sidebar:"docs",previous:{title:"5. \u8ba2\u5355\u670d\u52a1",permalink:"/docs/2.5.5/phoenix-2.x/phoenix/quick-start-example/order-microservice"},next:{title:"\u529f\u80fd\u603b\u89c8",permalink:"/docs/2.5.5/phoenix-2.x/phoenix/phoenix-all-future"}},l={},a=[{value:"\u914d\u7f6e",id:"\u914d\u7f6e",level:2},{value:"\u542f\u52a8",id:"\u542f\u52a8",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"\u96c6\u7fa4\u793a\u4f8b",children:"\u96c6\u7fa4\u793a\u4f8b"}),"\n",(0,o.jsxs)(n.p,{children:["\u672c\u7ae0\u4ecb\u7ecd\u672c\u5730\u642d\u5efa",(0,o.jsx)(n.code,{children:"\u914d\u7f6e\u96c6\u7fa4\u6a21\u5f0f"}),"\u7684 Phoenix \u96c6\u7fa4\uff0c\u5982\u679c\u60a8\u60f3\u4e86\u89e3\u66f4\u591a\u96c6\u7fa4\u6a21\u5f0f\u8bf7\u53c2\u8003\uff1a",(0,o.jsx)(n.a,{href:"/docs/2.5.5/phoenix-2.x/phoenix-core/phoenix-cluster-manager",children:"\u96c6\u7fa4\u914d\u7f6e"}),"\u3002"]}),"\n",(0,o.jsx)(n.h2,{id:"\u914d\u7f6e",children:"\u914d\u7f6e"}),"\n",(0,o.jsx)(n.p,{children:"\u672c\u5730\u914d\u7f6e Phoenix \u96c6\u7fa4\u65f6\uff0c\u9700\u8981\u8fde\u63a5\u5230\u5171\u4eab\u7684\u4e8b\u4ef6\u5b58\u50a8\u4ee5\u53ca\u6d88\u606f\u4e2d\u95f4\u4ef6. \u4ee5\u53ca\u914d\u7f6e\u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6."}),"\n",(0,o.jsxs)(n.p,{children:["\u5728\u5feb\u901f\u5165\u95e8\u7684\u793a\u4f8b\u4ee3\u7801\u4e2d\u63d0\u4f9b\u4e86\u57fa\u4e8e Docker \u542f\u52a8\u5171\u4eab\u8d44\u6e90\u7684",(0,o.jsx)(n.a,{href:"https://github.com/PhoenixIQ/hotel-booking/blob/main/docker-compose.yml",children:"\u793a\u4f8b\u914d\u7f6e"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["\u9664\u6b64\u4e4b\u5916\u8fd8\u8981\u6709\u4e00\u4e9b\u96c6\u7fa4\u7684\u914d\u7f6e, \u8be6\u7ec6\u8bf7",(0,o.jsx)(n.a,{href:"https://phoenix.iquantex.com/docs/phoenix-2.x/phoenix-core/phoenix-cluster-manager#%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE",children:"\u53c2\u8003\u94fe\u63a5"})]}),"\n",(0,o.jsx)(n.p,{children:"\u4ee5\u5feb\u901f\u5165\u95e8\u4e3a\u4f8b, \u9700\u8981\u7684\u914d\u7f6e\u7684\u53c2\u6570\u5982\u4e0b(\u6848\u4f8b\u4e2d\u5df2\u914d\u7f6e\u597d)\uff1a"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"# Web \u670d\u52a1\u7aef\u53e3\u5fc5\u987b\u4e0d\u540c.\nserver: \n  port: \n    8080\n\nquantex:\n  phoenix:\n    akka:\n      arteryCanonicalHostname: 127.0.0.1   # \u914d\u7f6e\u7ed1\u5b9a\u7684 host\n      artery-canonical-port: 2551          # \u914d\u7f6e\u4e0d\u552f\u4e00\u7684\u8282\u70b9\u7684\u8fdc\u7a0b\u7aef\u53e3\n      management-http-port: 8558           # \u914d\u7f6e\u4e0d\u552f\u4e00\u7684\u96c6\u7fa4\u7ba1\u7406\u7aef\u53e3\n    client:\n      mq:\n        address: 127.0.0.1:9092            # \u5171\u4eab\u7684 MQ \u5730\u5740            \n    server:\n      name: ${spring.application.name}     # \u96c6\u7fa4\u670d\u52a1\u540d\u552f\u4e00\n      mq:\n        address: 127.0.0.1:9092            # \u5171\u4eab\u7684 MQ \u5730\u5740       \n      event-store:\n         data-sources:                     # \u5171\u4eab\u7684\u4e8b\u4ef6\u5b58\u50a8\u6570\u636e\u5e93\n          - url: jdbc:postgresql://127.0.0.1:5432/postgres?useUnicode=true&characterEncoding=utf-8&verifyServerCertificate=false&useSSL=false&requireSSL=false\n            username: pg12                  # \u6570\u636e\u5e93\u8d26\u6237\n            password: pg12                  # \u6570\u636e\u5e93\u5bc6\u7801\n    cluster:       \n      discovery-method: config              # \u914d\u7f6e\u96c6\u7fa4\u670d\u52a1\u53d1\u73b0\u6a21\u5f0f\u4e3a\uff1a\u9759\u6001 \n      config:                               # \u914d\u7f6e\u96c6\u7fa4\u7684\u79cd\u5b50\u8282\u70b9\n        seed-node: akka://hotel-bookings@127.0.0.1:2551\n"})}),"\n",(0,o.jsx)(n.h2,{id:"\u542f\u52a8",children:"\u542f\u52a8"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"\u901a\u8fc7 docker \u542f\u52a8\u5171\u4eab\u8d44\u6e90"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"docker-compose up -d\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsx)(n.li,{children:"\u901a\u8fc7\u811a\u672c\u542f\u52a8\u79cd\u5b50\u8282\u70b9"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"# \u53c2\u6570\u4e3a\u670d\u52a1\u540d/Web\u7aef\u53e3/\u79cd\u5b50\u8282\u70b9\u8fdc\u7a0b\u7aef\u53e3/\u81ea\u8eab\u8fdc\u7a0b\u7aef\u53e3/\u81ea\u8eab\u96c6\u7fa4\u7ba1\u7406\u7aef\u53e3\nsh bootCluster.sh hotel-server 8080 2551 2551 8558\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsx)(n.li,{children:"\u901a\u8fc7\u811a\u672c\u542f\u52a8\u5176\u4ed6\u8282\u70b9"}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"# \u79cd\u5b50\u8282\u70b9\u7aef\u53e3\u4e0d\u53d8(\u5355\u79cd\u5b50\u8282\u70b9\u793a\u4f8b)\nsh bootCluster.sh hotel-server 8081 2551 2552 8559\nsh bootCluster.sh hotel-server 8082 2551 2553 8560\n"})}),"\n",(0,o.jsxs)(n.ol,{start:"4",children:["\n",(0,o.jsx)(n.li,{children:"\u9a8c\u8bc1"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["\u89c2\u5bdf\u63a7\u5236\u53f0\uff1a\u6253\u5370",(0,o.jsx)(n.code,{children:"Node [akka://hotel-bookings@127.0.0.1:2552] is JOINING"})," \u8bf4\u660e\u7ec4\u96c6\u7fa4\u6210\u529f\uff1b\u6216\u8005\u8fdb\u5165",(0,o.jsx)(n.code,{children:"phoenix-console"}),"\u9875\u9762\u67e5\u770b\u670d\u52a1\u72b6\u6001\u3002"]})]})}function d(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},11151:(e,n,s)=>{s.d(n,{Z:()=>c,a:()=>i});var o=s(67294);const r={},t=o.createContext(r);function i(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);